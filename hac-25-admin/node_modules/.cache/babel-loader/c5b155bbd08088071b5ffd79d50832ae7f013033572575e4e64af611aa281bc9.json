{"ast":null,"code":"import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  key: 1,\n  class: \"card\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"title\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"title\"\n};\nconst _hoisted_4 = {\n  class: \"group\"\n};\nconst _hoisted_5 = {\n  class: \"group\"\n};\nconst _hoisted_6 = {\n  class: \"group-file\"\n};\nconst _hoisted_7 = {\n  key: 2,\n  class: \"image-container\"\n};\nconst _hoisted_8 = [\"src\"];\nconst _hoisted_9 = {\n  key: 3,\n  class: \"file-container\"\n};\nconst _hoisted_10 = {\n  key: 4,\n  class: \"image-container\"\n};\nconst _hoisted_11 = [\"src\"];\nconst _hoisted_12 = {\n  key: 6,\n  class: \"wrap-btns\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_AppLoader = _resolveComponent(\"AppLoader\");\n  return $data.isLoading ? (_openBlock(), _createBlock(_component_AppLoader, {\n    key: 0\n  })) : (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [!$data.id ? (_openBlock(), _createElementBlock(\"h2\", _hoisted_2, \"Добавление награды\")) : (_openBlock(), _createElementBlock(\"h2\", _hoisted_3, \"Редактирование награды\")), _createElementVNode(\"div\", _hoisted_4, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    for: \"name\",\n    class: \"group-value\"\n  }, \"Название\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.name = $event),\n    class: \"group-item\",\n    placeholder: \"Введите название\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.name]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    for: \"description\",\n    class: \"group-value\"\n  }, \"Описание\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.description = $event),\n    name: \"description\",\n    id: \"description\",\n    placeholder: \"Расскажите подробнее\",\n    class: \"group-item\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.description]])]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"input\", {\n    type: \"file\",\n    id: \"file\",\n    onChange: _cache[2] || (_cache[2] = (...args) => $options.handleFileUpload && $options.handleFileUpload(...args)),\n    accept: \"image/*\"\n  }, null, 32 /* NEED_HYDRATION */), _cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    class: \"select-img img-text\",\n    for: \"file\"\n  }, \"Прикрепить изображения\", -1 /* HOISTED */))]), $data.imageUrlArray.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"img\", {\n    src: $data.imageUrlArray[0],\n    alt: \"Uploaded Image\"\n  }, null, 8 /* PROPS */, _hoisted_8)])) : $data.fileNameArray.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"span\", null, _toDisplayString($data.fileNameArray[0]), 1 /* TEXT */), _cache[9] || (_cache[9] = _createElementVNode(\"br\", null, null, -1 /* HOISTED */)), _createElementVNode(\"small\", null, _toDisplayString($data.fileSizeArray[0]), 1 /* TEXT */)])) : $data.photo_path ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"img\", {\n    src: `http://213.139.211.149:4000/files/${$data.photo_path}`,\n    alt: \"\"\n  }, null, 8 /* PROPS */, _hoisted_11)])) : _createCommentVNode(\"v-if\", true), !$data.message && !$data.id ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 5,\n    class: \"btn continue\",\n    type: \"button\",\n    onClick: _cache[3] || (_cache[3] = $event => $options.add())\n  }, \" Добавить \")) : _createCommentVNode(\"v-if\", true), !$data.message && $data.id ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createElementVNode(\"button\", {\n    class: \"btn delete\",\n    type: \"button\",\n    onClick: _cache[4] || (_cache[4] = $event => $options.deleteAward())\n  }, \" Удалить \"), _createElementVNode(\"button\", {\n    class: \"btn continue\",\n    type: \"button\",\n    onClick: _cache[5] || (_cache[5] = $event => $options.save())\n  }, \" Сохранить \")])) : _createCommentVNode(\"v-if\", true), $data.message ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 7,\n    class: _normalizeClass([\"msg\", {\n      success: this.message == 'Успешно',\n      error: this.message != 'Успешно'\n    }])\n  }, _toDisplayString($data.message), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true)]));\n}","map":{"version":3,"names":["key","class","$data","isLoading","_createBlock","_component_AppLoader","_createElementBlock","_hoisted_1","id","_hoisted_2","_hoisted_3","_createElementVNode","_hoisted_4","for","type","name","_cache","$event","placeholder","_hoisted_5","description","_hoisted_6","onChange","args","$options","handleFileUpload","accept","imageUrlArray","length","_hoisted_7","src","alt","_hoisted_8","fileNameArray","_hoisted_9","_toDisplayString","fileSizeArray","photo_path","_hoisted_10","_hoisted_11","_createCommentVNode","message","onClick","add","_hoisted_12","deleteAward","save","_normalizeClass"],"sources":["/Users/vadim/Desktop/hac-25-admin/src/pages/AddAward.vue"],"sourcesContent":["<script>\nimport axios from \"axios\";\nimport AppLoader from \"../components/AppLoader.vue\";\nexport default {\n  name: \"AddAward\",\n  components: { AppLoader },\n  data() {\n    return {\n      message: \"\",\n      isLoading: false,\n      name: \"\",\n      id: this.$route.query.id,\n      description: \"\",\n      photo_path: \"\",\n      fileObjects: [],\n      imageUrlArray: [],\n      isImageArray: [],\n      fileNameArray: [],\n      fileSizeArray: [],\n    };\n  },\n  methods: {\n    handleFileUpload(event) {\n      const file = event.target.files[0]; // Получаем первый выбранный файл\n\n      if (file) {\n        // Очищаем массивы перед добавлением нового файла\n        this.fileObjects = [file];\n        this.imageUrlArray = [];\n        this.isImageArray = [];\n        this.fileNameArray = [];\n        this.fileSizeArray = [];\n\n        // Проверяем, является ли файл изображением\n        if (file.type.startsWith(\"image/\")) {\n          const reader = new FileReader();\n          reader.onload = (e) => {\n            this.imageUrlArray.push(e.target.result); // Добавляем URL изображения\n            this.isImageArray.push(true);\n          };\n          reader.readAsDataURL(file);\n        } else {\n          this.isImageArray.push(false);\n        }\n\n        // Добавляем имя и размер файла\n        this.fileNameArray.push(file.name);\n        this.fileSizeArray.push(this.formatFileSize(file.size));\n      }\n      this.upload_file();\n    },\n    formatFileSize(bytes) {\n      if (bytes === 0) return \"0 Bytes\";\n      const k = 1024;\n      const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\"];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n    },\n    async add() {\n      try {\n        let response = await axios.post(`/awards`, {\n          name: this.name,\n          description: this.description,\n          photo_path: this.photo_path,\n        });\n        console.log(response);\n        if (response.status == 200) {\n          this.message = \"Успешно\";\n        }\n        setTimeout(() => {\n          this.message = \"\";\n          this.$router.go(-1);\n        }, 3000);\n      } catch (err) {\n        console.log(err);\n      }\n    },\n\n    async save() {\n      try {\n        let response = await axios.put(`/awards/${this.id}`, {\n          name: this.name,\n          description: this.description,\n          photo_path: this.photo_path,\n        });\n        console.log(response);\n        if (response.status == 200) {\n          this.message = \"Успешно\";\n        }\n        setTimeout(() => {\n          this.message = \"\";\n          this.$router.go(-1);\n        }, 3000);\n      } catch (err) {\n        console.log(err);\n      }\n    },\n\n    async load_info() {\n      try {\n        let response = await axios.get(`/awards/${this.id}`);\n        console.log(response);\n        this.name = response.data.name;\n        this.photo_path = response.data.photo_path;\n        this.description = response.data.description;\n      } catch (err) {\n        console.log(err);\n      }\n    },\n\n    async upload_file() {\n      try {\n        const formData = new FormData();\n        if (this.fileObjects.length > 0) {\n          formData.append(\"file\", this.fileObjects[0]);\n        }\n        let response = await axios.post(\n          `http://213.139.211.149:4000/v1/files/upload_file`,\n          formData,\n          {\n            headers: {\n              \"Content-Type\": \"multipart/form-data\",\n            },\n          }\n        );\n        console.log(response);\n        this.photo_path = response.data.filename;\n      } catch (err) {\n        console.log(err);\n      }\n    },\n\n    async deleteAward() {\n      try {\n        let response = await axios.delete(`/awards/${this.id}`);\n        console.log(response);\n        if (response.status == 200) {\n          this.message = \"Успешно\";\n        }\n        setTimeout(() => {\n          this.message = \"\";\n          this.$router.go(-1);\n        }, 3000);\n      } catch (err) {\n        console.log(err);\n      }\n    },\n  },\n  mounted() {\n    if (this.id) {\n      this.load_info();\n    }\n  },\n};\n</script>\n<template>\n  <AppLoader v-if=\"isLoading\" />\n  <div class=\"card\" v-else>\n    <h2 class=\"title\" v-if=\"!id\">Добавление награды</h2>\n    <h2 class=\"title\" v-else>Редактирование награды</h2>\n    <div class=\"group\">\n      <label for=\"name\" class=\"group-value\">Название</label>\n      <input\n        type=\"text\"\n        id=\"name\"\n        name=\"name\"\n        v-model=\"name\"\n        class=\"group-item\"\n        placeholder=\"Введите название\"\n      />\n    </div>\n    <div class=\"group\">\n      <label for=\"description\" class=\"group-value\">Описание</label>\n      <textarea\n        v-model=\"description\"\n        name=\"description\"\n        id=\"description\"\n        placeholder=\"Расскажите подробнее\"\n        class=\"group-item\"\n      ></textarea>\n    </div>\n    <div class=\"group-file\">\n      <input\n        type=\"file\"\n        id=\"file\"\n        @change=\"handleFileUpload\"\n        accept=\"image/*\"\n      />\n      <label class=\"select-img img-text\" for=\"file\"\n        >Прикрепить изображения</label\n      >\n    </div>\n    <div v-if=\"imageUrlArray.length > 0\" class=\"image-container\">\n      <img :src=\"imageUrlArray[0]\" alt=\"Uploaded Image\" />\n    </div>\n    <div v-else-if=\"fileNameArray.length > 0\" class=\"file-container\">\n      <span>{{ fileNameArray[0] }}</span>\n      <br />\n      <small>{{ fileSizeArray[0] }}</small>\n    </div>\n    <div class=\"image-container\" v-else-if=\"photo_path\">\n      <img :src=\"`http://213.139.211.149:4000/files/${photo_path}`\" alt=\"\" />\n    </div>\n    <button\n      class=\"btn continue\"\n      v-if=\"!message && !id\"\n      type=\"button\"\n      @click=\"add()\"\n    >\n      Добавить\n    </button>\n    <div class=\"wrap-btns\" v-if=\"!message && id\">\n      <button class=\"btn delete\" type=\"button\" @click=\"deleteAward()\">\n        Удалить\n      </button>\n      <button class=\"btn continue\" type=\"button\" @click=\"save()\">\n        Сохранить\n      </button>\n    </div>\n    <div\n      class=\"msg\"\n      :class=\"{\n        success: this.message == 'Успешно',\n        error: this.message != 'Успешно',\n      }\"\n      v-if=\"message\"\n    >\n      {{ message }}\n    </div>\n  </div>\n</template>\n<style scoped>\nh1 {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  font-weight: 600;\n  font-size: 20px;\n  line-height: 24px;\n  letter-spacing: 0.04em;\n}\n\nh1 span {\n  color: #005eff;\n  font-weight: 600;\n  font-size: 20px;\n  line-height: 24px;\n  letter-spacing: 0.04em;\n}\n.card {\n  width: 400px;\n  margin: 0 auto;\n  border-radius: 20px;\n  padding: 30px;\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  align-items: center;\n  cursor: default;\n}\n\n.wrap-title {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  align-items: center;\n}\n\n.title {\n  font-weight: 400;\n  font-size: 24px;\n  line-height: 30px;\n  color: #14171f;\n  font-family: \"Unbounded\", serif;\n}\n\n.subtitle {\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 19px;\n  color: #14171f;\n}\n\n.date-group {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n\n.group {\n  position: relative;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.group-value {\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 16px;\n  color: #5b6171;\n}\n\n.group-item {\n  border-radius: 8px;\n  padding: 12px 16px;\n  border: 1px solid #dfe3ec;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 16px;\n  color: #5b6171;\n}\n\n.group-item::placeholder {\n  color: #8c93a6;\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 22px;\n}\n\n.wrap-btns {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.btn {\n  width: 100%;\n  padding: 14.5px 20px;\n  border-radius: 8px;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 19px;\n}\n\n.continue {\n  background-color: #005eff;\n  color: #fff;\n}\n\n.delete {\n  background-color: #cf0032;\n  color: #fff;\n}\n\ninput[type=\"file\"] {\n  border: none;\n  display: none;\n}\n\n.group-file {\n  padding: 15px 25px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1.9px dashed #14171f;\n  border-radius: 8px;\n}\n\n.img-text {\n  width: 100%;\n  text-align: center;\n  cursor: pointer;\n}\n.image-container {\n  margin: 0 auto;\n  max-width: 400px;\n  border-radius: 8px;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.file-container {\n  display: flex;\n  align-items: center;\n  gap: 7px;\n}\n\n.wrap-btns {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}