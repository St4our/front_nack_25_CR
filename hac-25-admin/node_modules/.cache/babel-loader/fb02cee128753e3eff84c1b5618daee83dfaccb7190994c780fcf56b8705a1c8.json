{"ast":null,"code":"import axios from \"axios\";\nimport AppLoader from \"../components/AppLoader.vue\";\nexport default {\n  name: \"AddHero\",\n  components: {\n    AppLoader\n  },\n  data() {\n    return {\n      message: \"\",\n      isLoading: false,\n      date_from: \"\",\n      date_to: \"\",\n      desc: \"\",\n      fileObjects: [],\n      imageUrlArray: [],\n      isImageArray: [],\n      fileNameArray: [],\n      fileSizeArray: [],\n      awards: [],\n      coordinates: \"\",\n      awards_selected: [],\n      events: [],\n      events_selected: [],\n      municipalities: [],\n      municipality: \"\"\n    };\n  },\n  methods: {\n    goBack() {\n      try {\n        if (this.step > 1) {\n          this.step--;\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    async load_awards() {\n      try {\n        let response = await axios.get(`/awards`);\n        this.awards = response.data.awards;\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    async load_events() {\n      try {\n        let response = await axios.get(`/events`);\n        this.events = response.data.events;\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    async load_muni() {\n      try {\n        let response = await axios.get(`/municipalities`);\n        this.municipalities = response.data.municipalities;\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    formatDate(inputDate) {\n      // Создаем объект Date из входной даты\n      if (inputDate) {\n        const date = new Date(inputDate);\n\n        // Получаем день, месяц и год\n        const day = String(date.getDate()).padStart(2, \"0\"); // День (добавляем ведущий ноль, если нужно)\n        const month = String(date.getMonth() + 1).padStart(2, \"0\"); // Месяц (нумерация с 0, поэтому +1)\n        const year = date.getFullYear(); // Год\n\n        // Возвращаем дату в формате дд.мм.гггг\n        return `${day}.${month}.${year}`;\n      }\n    },\n    formatCoordinates() {\n      if (!this.coordinates) return;\n\n      // Удаляем все лишние символы, оставляем только цифры, точку и запятую\n      let formatted = this.coordinates.replace(/[^0-9.,-]/g, \"\");\n\n      // Разбиваем на широту и долготу\n      let parts = formatted.split(\",\");\n      if (parts.length === 2) {\n        let lat = parseFloat(parts[0]).toFixed(6); // Округляем до 6 знаков\n        let lon = parseFloat(parts[1]).toFixed(6);\n        if (!isNaN(lat) && !isNaN(lon)) {\n          this.coordinates = `${lat}, ${lon}`;\n        }\n      }\n    }\n  },\n  mounted() {\n    this.load_awards();\n    this.load_events();\n    this.load_muni();\n  }\n};","map":{"version":3,"names":["axios","AppLoader","name","components","data","message","isLoading","date_from","date_to","desc","fileObjects","imageUrlArray","isImageArray","fileNameArray","fileSizeArray","awards","coordinates","awards_selected","events","events_selected","municipalities","municipality","methods","goBack","step","err","console","log","load_awards","response","get","load_events","load_muni","formatDate","inputDate","date","Date","day","String","getDate","padStart","month","getMonth","year","getFullYear","formatCoordinates","formatted","replace","parts","split","length","lat","parseFloat","toFixed","lon","isNaN","mounted"],"sources":["/Users/vadim/Desktop/hac-25-admin/src/pages/AddHero.vue"],"sourcesContent":["<script>\nimport axios from \"axios\";\nimport AppLoader from \"../components/AppLoader.vue\";\nexport default {\n  name: \"AddHero\",\n  components: { AppLoader },\n  data() {\n    return {\n      message: \"\",\n      isLoading: false,\n      date_from: \"\",\n      date_to: \"\",\n      desc: \"\",\n      fileObjects: [],\n      imageUrlArray: [],\n      isImageArray: [],\n      fileNameArray: [],\n      fileSizeArray: [],\n      awards: [],\n      coordinates: \"\",\n      awards_selected: [],\n      events: [],\n      events_selected: [],\n      municipalities: [],\n      municipality: \"\",\n    };\n  },\n  methods: {\n    goBack() {\n      try {\n        if (this.step > 1) {\n          this.step--;\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    },\n\n    async load_awards() {\n      try {\n        let response = await axios.get(`/awards`);\n        this.awards = response.data.awards;\n      } catch (err) {\n        console.log(err);\n      }\n    },\n\n    async load_events() {\n      try {\n        let response = await axios.get(`/events`);\n        this.events = response.data.events;\n      } catch (err) {\n        console.log(err);\n      }\n    },\n\n    async load_muni() {\n      try {\n        let response = await axios.get(`/municipalities`);\n        this.municipalities = response.data.municipalities;\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    formatDate(inputDate) {\n      // Создаем объект Date из входной даты\n      if (inputDate) {\n        const date = new Date(inputDate);\n\n        // Получаем день, месяц и год\n        const day = String(date.getDate()).padStart(2, \"0\"); // День (добавляем ведущий ноль, если нужно)\n        const month = String(date.getMonth() + 1).padStart(2, \"0\"); // Месяц (нумерация с 0, поэтому +1)\n        const year = date.getFullYear(); // Год\n\n        // Возвращаем дату в формате дд.мм.гггг\n        return `${day}.${month}.${year}`;\n      }\n    },\n    formatCoordinates() {\n      if (!this.coordinates) return;\n\n      // Удаляем все лишние символы, оставляем только цифры, точку и запятую\n      let formatted = this.coordinates.replace(/[^0-9.,-]/g, \"\");\n\n      // Разбиваем на широту и долготу\n      let parts = formatted.split(\",\");\n      if (parts.length === 2) {\n        let lat = parseFloat(parts[0]).toFixed(6); // Округляем до 6 знаков\n        let lon = parseFloat(parts[1]).toFixed(6);\n        if (!isNaN(lat) && !isNaN(lon)) {\n          this.coordinates = `${lat}, ${lon}`;\n        }\n      }\n    },\n  },\n  mounted() {\n    this.load_awards();\n    this.load_events();\n    this.load_muni();\n  },\n};\n</script>\n<template>\n  <AppLoader v-if=\"isLoading\" />\n  <div class=\"card\" v-else>\n    <h2 class=\"title\">Расскажите о герое</h2>\n    <div class=\"group\">\n      <label for=\"fio\" class=\"group-value\">ФИО</label>\n      <input\n        type=\"text\"\n        id=\"fio\"\n        name=\"fio\"\n        v-model=\"fio\"\n        class=\"group-item\"\n        placeholder=\"Введите ФИО\"\n      />\n    </div>\n    <div class=\"group\">\n      <label for=\"fio\" class=\"group-value\">Координаты места захоронения</label>\n      <input\n        type=\"text\"\n        id=\"fio\"\n        name=\"fio\"\n        v-model=\"coordinates\"\n        @blur=\"formatCoordinates\"\n        class=\"group-item\"\n        placeholder=\"Введите координаты\"\n      />\n    </div>\n    <div class=\"date-group\">\n      <div class=\"group\">\n        <label for=\"date_from\" class=\"group-value\">Года жизни</label>\n        <input\n          type=\"date\"\n          id=\"date_from\"\n          name=\"date_from\"\n          v-model=\"date_from\"\n          class=\"group-item\"\n        />\n      </div>\n      -\n      <div class=\"group\">\n        <label for=\"date_to\" class=\"group-value\">гг.</label>\n        <input\n          type=\"date\"\n          id=\"date_to\"\n          name=\"date_to\"\n          v-model=\"date_to\"\n          class=\"group-item\"\n        />\n      </div>\n    </div>\n    <div class=\"group\">\n      <label for=\"desc\" class=\"group-value\">Описание</label>\n      <textarea\n        v-model=\"desc\"\n        name=\"desc\"\n        id=\"desc\"\n        placeholder=\"Расскажите подробнее\"\n        class=\"group-item\"\n      ></textarea>\n    </div>\n    <div class=\"group\">\n      <label for=\"awards\" class=\"group-value\">Награды</label>\n      <select\n        name=\"awards\"\n        class=\"group-item\"\n        id=\"awards\"\n        v-model=\"awards_selected\"\n        multiple\n      >\n        <option :value=\"award.id\" :key=\"award.id\" v-for=\"award in awards\">\n          {{ award.name }}\n        </option>\n      </select>\n    </div>\n    <div class=\"group\">\n      <label for=\"events\" class=\"group-value\">События</label>\n      <select\n        name=\"events\"\n        id=\"events\"\n        class=\"group-item\"\n        v-model=\"events_selected\"\n        multiple\n      >\n        <option :value=\"event.id\" :key=\"event.id\" v-for=\"event in events\">\n          {{ event.name }}\n        </option>\n      </select>\n    </div>\n    <div class=\"group-file\">\n      <input\n        type=\"file\"\n        id=\"file\"\n        @change=\"handleFileUpload\"\n        accept=\"image/*\"\n        multiple\n      />\n      <label class=\"select-img img-text\" for=\"file\"\n        >Прикрепить изображения</label\n      >\n    </div>\n    <div\n      v-for=\"(imageUrl, index) in imageUrlArray\"\n      :key=\"index\"\n      class=\"image-container\"\n    >\n      <img :src=\"imageUrl\" alt=\"Uploaded Image\" />\n    </div>\n\n    <div v-if=\"!isImageArray.includes(true)\" class=\"file-container\">\n      <span>{{ fileNameArray.join(\", \") }}</span>\n      <br />\n      <small>{{ fileSizeArray.join(\", \") }}</small>\n    </div>\n    <button class=\"btn continue\" v-if=\"!message\" type=\"button\" @click=\"logIn()\">\n      Продолжить\n    </button>\n    <div\n      class=\"msg\"\n      :class=\"{\n        success: this.message == 'Успешно',\n        error: this.message != 'Успешно',\n      }\"\n      v-if=\"message\"\n    >\n      {{ message }}\n    </div>\n  </div>\n</template>\n<style scoped>\nh1 {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  font-weight: 600;\n  font-size: 20px;\n  line-height: 24px;\n  letter-spacing: 0.04em;\n}\n\nh1 span {\n  color: #005eff;\n  font-weight: 600;\n  font-size: 20px;\n  line-height: 24px;\n  letter-spacing: 0.04em;\n}\n.card {\n  width: 380px;\n  margin: 0 auto;\n  border-radius: 20px;\n  padding: 30px;\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  align-items: center;\n  cursor: default;\n}\n\n.wrap-title {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  align-items: center;\n}\n\n.title {\n  font-weight: 400;\n  font-size: 24px;\n  line-height: 30px;\n  color: #14171f;\n  font-family: \"Unbounded\", serif;\n}\n\n.subtitle {\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 19px;\n  color: #14171f;\n}\n\n.date-group {\n  display: flex;\n  align-items: center;\n  gap: 7px;\n}\n\n.group {\n  position: relative;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.group-value {\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 16px;\n  color: #5b6171;\n}\n\n.group-item {\n  border-radius: 8px;\n  padding: 12px 16px;\n  border: 1px solid #dfe3ec;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 16px;\n  color: #5b6171;\n}\n\n.group-item::placeholder {\n  color: #8c93a6;\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 22px;\n}\n\n.wrap-btns {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.btn {\n  width: 100%;\n  padding: 14.5px 20px;\n  border-radius: 8px;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 19px;\n}\n\n.continue {\n  background-color: #005eff;\n  color: #fff;\n}\n\ninput[type=\"file\"] {\n  border: none;\n  display: none;\n}\n\n.group-file {\n  padding: 15px 25px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1.9px dashed #14171f;\n  border-radius: 8px;\n}\n\n.img-text {\n  width: 100%;\n  text-align: center;\n  cursor: pointer;\n}\n.image-container {\n  margin: 0 auto;\n  max-width: 400px;\n  border-radius: 8px;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.file-container {\n  display: flex;\n  align-items: center;\n  gap: 7px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}